webpackJsonp([3],{2:function(n,e,t){n.exports=t("22iK")},"22iK":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(n){var e=t("hHRx"),a=t("dwxp"),i=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();new(function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lazyLoad()}return i(t,[{key:"lazyLoad",value:function(){switch(n('meta[name="page"]').attr("content")){case"module-manager":new e.a;break;case"menu-manager":new a.a}}}]),t}())}.call(e,t("7t+N"))},dwxp:function(n,e,t){"use strict";(function(n){t.d(e,"a",function(){return o});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();var r=t("M4fF"),o=function(){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.initMenus(),this.initListeners()}return i(e,[{key:"initMenus",value:function(){var e=this;this.initMenuHtml("main-menu-structure","menu-main"),this.initMenuHtml("admin-menu-structure","menu-admin"),n(".menu-manager").nestable({maxDepth:3}),this.menuToJson(),n(".menu-manager").on("change",function(n){e.menuToJson(),e.save()})}},{key:"initMenuHtml",value:function(e,t){var i=JSON.parse(n("meta[name='"+e+"']").attr("content"));if("object"===(void 0===i?"undefined":a(i))){var r="",o=!0,u=!1,l=void 0;try{for(var d,s=i[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var c=d.value;r+=this.buildItem(c)}}catch(n){u=!0,l=n}finally{try{!o&&s.return&&s.return()}finally{if(u)throw l}}n(".menu-manager."+t+" ol.dd-list:first").html(r)}}},{key:"initListeners",value:function(){this.initSaveListener(),this.initAddGroupListener(),this.initAddRouteLinkListener(),this.initAddLinkListener(),this.initMenuSwitcherListener()}},{key:"initMenuSwitcherListener",value:function(){var e=this;n("input#menu-switcher").on("change",function(t){n(t.currentTarget).is(":checked")?(n(".menu-manager.menu-admin").show(),n(".menu-manager.menu-main").hide()):(n(".menu-manager.menu-admin").hide(),n(".menu-manager.menu-main").show()),e.menuToJson()})}},{key:"initSaveListener",value:function(){var e=this;n("a.save-menu").on("click",function(n){n.preventDefault(),e.save()})}},{key:"save",value:function(){var e=n("meta[name='save-url']").attr("content");n.ajax({url:e,method:"post",data:{_token:n("meta[name='csrf-token']").attr("content"),structure:this.menuStructure,type:n(".menu-manager:visible").data("type")}}).then(function(n){}).fail(function(n){swal("Error",n.message,"error")})}},{key:"initAddGroupListener",value:function(){var e=this;n("#add-group").on("click",function(t){var a=n("#addGroupModal input[name='label']"),i=n("#addGroupModal input[name='icon']"),r=a.val(),o=i.val();r?o?(e.addGroup(r,o),a.val(""),i.val(""),n("#addGroupModal").modal("hide")):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"initAddRouteLinkListener",value:function(){var e=this;n("#add-route-link").on("click",function(t){var a=n("#addRouteLinkModal input[name='label']"),i=n("#addRouteLinkModal input[name='icon']"),r=n("#addRouteLinkModal input[name='module']"),o=n("#addRouteLinkModal input[name='route']"),u=a.val(),l=i.val(),d=r.val(),s=o.val();u?l?d?s?(e.addRouteLink(u,l,d,s),a.val(""),i.val(""),r.val(""),o.val(""),n("#addRouteLinkModal").modal("hide")):o.parent(".form-line").addClass(["focused","error"]):r.parent(".form-line").addClass(["focused","error"]):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"initAddLinkListener",value:function(){var e=this;n("#add-link").on("click",function(t){var a=n("#addLinkModal input[name='label']"),i=n("#addLinkModal input[name='icon']"),r=n("#addLinkModal input[name='url']"),o=a.val(),u=i.val(),l=r.val();o?u?l?(e.addLink(o,u,l),a.val(""),i.val(""),r.val(""),n("#addLinkModal").modal("hide")):r.parent(".form-line").addClass(["focused","error"]):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"menuToJson",value:function(){this.menuStructure=JSON.stringify(n(".menu-manager:visible").nestable("serialize"))}},{key:"addGroup",value:function(e,t){var a=this.buildItem({type:"group",label:e,icon:t,color:"green"});n(".menu-manager:visible .dd-list:first").append(a),this.menuToJson(),this.save()}},{key:"addRouteLink",value:function(e,t,a,i){var r=this.buildItem({type:"route",module:a,label:e,icon:t,color:"red",route:i});n(".menu-manager:visible .dd-list:first").append(r),this.menuToJson(),this.save()}},{key:"addLink",value:function(e,t,a){var i=this.buildItem({type:"link",label:e,icon:t,color:"blue",url:a});n(".menu-manager:visible .dd-list:first").append(i),this.menuToJson(),this.save()}},{key:"buildItem",value:function(e){var t=this,a="";"group"!==e.type&&(a="dd-nochildren");var i="";e.module&&(i='data-module="'+e.module+'"');var o="";e.url&&(o='data-url="'+e.url+'"');var u="";e.route&&(u='data-route="'+e.route+'"');var l="",d=e.label;e.translation&&(l='data-translation="'+e.translation+'"',d=e.translation);var s='<li class="dd-item '+a+'" '+i+" "+u+" "+o+' data-type="'+e.type+'" data-label="'+e.label+'" '+l+' data-icon="'+e.icon+'" data-nochildren="'+!!e.noChildren+'" data-color="'+e.color+'">\n            <div class="dd-handle">\n                <i class="material-icons">'+e.icon+'</i>\n                <span class="icon-label">'+d+'</span>\n                <span class="pull-right col-'+e.color+'">'+r.capitalize(e.type)+"</span>\n            </div>";return e.children&&(s+='<ol class="dd-list">',n.each(e.children,function(n,e){s+=t.buildItem(e)}),s+="</ol>"),s+="</li>"}}]),e}()}).call(e,t("7t+N"))},hHRx:function(n,e,t){"use strict";(function(n){t.d(e,"a",function(){return i});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();var i=function(){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.initCheckboxListener()}return a(e,[{key:"initCheckboxListener",value:function(){var e=n('meta[name="domain"]').attr("content");n("input[type='checkbox'].module-activation").on("click",function(t){var a=t.currentTarget,i=n(a).data("module"),r=!0===n(a).is(":checked")?"1":"0";document.location.href=laroute.route("uccello.settings.module.activation",{domain:e,src_module:i,active:r})})}}]),e}()}).call(e,t("7t+N"))}},[2]);